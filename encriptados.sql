-- CONECTADOS CON EL USUARIO RECIEN CREADO:

CREATE TABLE EMPLEADO
(NOMBRE VARCHAR2(30),
APELLIDO VARCHAR2(30),
FECHACON DATE,
SUELDO NUMBER);

INSERT INTO EMPLEADO VALUES ('JORGE','BEDOYA','20-08-1967',340000);
INSERT INTO EMPLEADO VALUES ('PAULA','BETANCUR','17-09-1976',347888);
INSERT INTO EMPLEADO VALUES ('CRISTINA','GALEANO','19-10-1989',55555);
INSERT INTO EMPLEADO VALUES ('ESMERALDA','PORRAS','12-08-1989',678888);
INSERT INTO EMPLEADO VALUES ('MANUELA','TENGANAN','31-12-1995',123333);
INSERT INTO EMPLEADO VALUES ('LUIS','SUAREZ','20-09-1968',33333);

SELECT * FROM EMPLEADO;

-- CREAR REDACCION FULL

BEGIN
dbms_redact.add_policy
(object_schema => 'ENCRIPTADO',
object_name => 'EMPLEADO',
policy_name => 'DMSK_FECHACON',
column_name => 'FECHACON',
function_type => DBMS_REDACT.FULL,
expression => '1=1');
END;

-- COMO VER LAS POLITICAS DE REDACCION CREADAS?

SELECT * FROM redaction_policies;

-- COMO CAMBIAR UN VALOR POR DEFECTO?

exec dbms_redact.UPDATE_FULL_REDACTION_VALUES ( varchar_val => 'X' );

-- DESDE EL USUARIO ENCRIPTADO, CREAR LA SIGUIENTE TABLA E INSERTARLE LOS
-- SIGUIENTES DATOS:

CREATE TABLE CREDIT_CARD ( ID INTEGER , 
IDCLIENTE VARCHAR(10) , CARD VARCHAR(12) );

INSERT INTO CREDIT_CARD VALUES ( 1 , '5477815100' , '987234372687');
INSERT INTO CREDIT_CARD VALUES ( 2 , '2554783107' , '772534961873');
INSERT INTO CREDIT_CARD VALUES ( 3 , '9875424112' , '237498428852');
INSERT INTO CREDIT_CARD VALUES ( 4 , '2547458213' , '753298721630');
COMMIT;

SELECT * FROM CREDIT_CARD;

-- DESDE EL USUARIO ENCRIPTADO, CREAR LO SIGUIENTE:

CREATE TABLE PERSONAL  ( ID INTEGER , 
DATOS VARCHAR(100) , 
SUELDO  NUMERIC( 10)) ;

INSERT INTO PERSONAL  VALUES ( 1 , 'ROBERTO SINFUENTES ALVAREZ' , 8500 );
INSERT INTO PERSONAL  VALUES ( 2 , 'ALBERTO RAMIREZ HERRERA' ,    9300 );
INSERT INTO PERSONAL  VALUES ( 3 , 'SOFIA CARDENAS MORALES' ,     5800 );
INSERT INTO PERSONAL  VALUES ( 4 , 'LEOPOLDO MATA ROSALES' ,      4800 );
COMMIT;

